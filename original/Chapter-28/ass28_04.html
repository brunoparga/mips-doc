<!doctype html> 
<html lang="en">

<!-- LessonMaker.java, version June 3, 2018 on Sat Nov 27 16:17:40 EST 2021 -->


<!-- Mirrored from chortle.ccsu.edu/assemblytutorial/Chapter-28/ass28_04.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 20 Jul 2023 11:01:53 GMT -->
<head>
<meta charset="utf-8">
<!-- <meta name="copyright" content="2020: Creative Commons Attribution-NonCommercial 4.0 International License"> -->
<meta name="robots" content="index,follow">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Frame Pointer</title>
<link rel="stylesheet" href="../AssemblyStyleRev3.css">
<script src="../CAIscripts.js"></script>
</head>

<body>


<!-- TOP NAVIGATION DIVISION -->
<div class="topnavigation">
<a href="ass28_03.html"><img src="../backIcon.gif" alt="go to previous page"></a> &nbsp; 
<a href="../index-2.html#part7"><img src="../homeIcon.gif" alt="go to home page"></a> &nbsp;
<a href="ass28_05.html"><img src="../nextIcon.gif" alt="go to next page"></a>
<a><img src='../audioIcon.gif' alt='hear noise' onclick='doAudio()'></a>
<audio id='player' src='../../external.html?link=https://chortle.ccsu.edu/assemblytutorial/Audio/chap28-04.mp3'></audio>
<a><img src='../highLightIcon.gif' alt='highlighting' onclick='doHighlight()' style="display: block;float:right"></a>
</div>

<!-- ANSWER DIVISION -->
<div class="answer">
<!-- ../Audio/chap28-04.mp3 -->

<h3>Answer:</h3>
<p>
Conceptually, the local variables cease to exist when the stack
frame that implements them is popped.
</p>

<p>
Of course, the memory that implemented the stack frame is still
there, but in normal operation the variables in it are not accessible.
</p>

<br class="clearfloats"> 
</div>

<!-- LESSON DIVISION -->
<div class="lesson">
<h1>Frame Pointer</h1>

<a id="frame_pointer,_reason_for"> </a>

 
<img src="stackFrame00.gif"  class="rightimage" alt="stack frame">
 

<div class="left">


<p>
<span class="highlight">
Register 
<code class="register">$30</code> is reserved,
by software convention,
for use as a <b>frame pointer</b>.</span>
In the extended assembler it has the mnemonic name <code class="register">$fp</code>.
When a subroutine starts running,
the frame pointer points at the frame at the top of the stack.
Variables for the active subroutine are in that stack frame
and are accessed by using the address in <code class="register">$fp</code>.
</p>

<p><span class="highlight">
When the subroutine first becomes active, the frame pointer and the stack pointer both
point at the top of the stack.</span>
(Remember, our stacks grow downward, so in the picture
<code class="register">$fp</code> is correctly pointing at the last word that was pushed onto
the stack, the top of the stack.)
</p>

<p>
<span class="highlight">But the stack (and the stack pointer) may be involved in
arithmetic expression evaluation.
This often involves pushing and popping values onto 
and off of the stack.</span>
If <code class="register">$sp</code> keeps changing, 
it would be hard to access a variable
at a fixed location on the stack.
</p>

<p>
To make things easy for  compilers 
(and for human assembly language programmers)
it is convenient to have a frame pointer that does not change its
value while a subroutine is active.
<span class="highlight">The variables are always  the same distance from the 
unchanging frame pointer.</span>
</p>

<p>
In the subroutine prolog,
the caller's frame pointer is pushed onto the stack
along with the stack pointer and any <code>S</code> registers.
Now the subroutine makes room on the stack for
variables and points the frame pointer 
to the top of the stack frame.
</p>

</div>

<br class="clearfloats"> 
</div> <!-- end LESSON -->

<!-- QUESTION DIVISION -->
<div class="question">
<h3> QUESTION 4:</h3>
<form>
<p>
Look at the picture.
Write the instruction that loads register <code>$t5</code> with the
value held in the variable <b><code>a</code></b>:
</p>

<pre>
lw $t5, <input type="text" size="6" /> ( <input type="text" size="6" /> )
</pre>

<p>
(Hint: use <code class="register">$fp</code> as a base register.)
</p>

</form>


<br class="clearfloats"> 
</div> <!-- end QUESTION -->

<!-- BOTTOM NAVIGATION DIVISION -->
<div class="bottomnavigation">
<a href="ass28_03.html"><img src="../backIcon.gif" alt="go to previous page"></a> &nbsp; 
<a href="../index-2.html#part7"><img src="../homeIcon.gif" alt="go to home page"></a> &nbsp;
<a href="ass28_05.html"><img src="../nextIcon.gif" alt="go to next page"></a>
</div>

</body>

<!-- Mirrored from chortle.ccsu.edu/assemblytutorial/Chapter-28/ass28_04.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 20 Jul 2023 11:01:54 GMT -->
</html>
